fix the code design refactor
allow user to be saved in sessions
